{% extends 'base_newsfeed.html' %}
{% load staticfiles %}
{% block page_content %}

    {% if not user.is_authenticated %}
        <script language="javascript">
            setAlert("로그인 페이지로 이동", "로그인 에러", "/login");
        </script>
    {% endif %}

    {% include "newsfeed_header.html" %}

    <div id="newsfeed-body">
        {% for item in get_list %}
            {% include "newsfeed_"|add:item.type|add:".html" with article=item.board imgs=item.image %}
        {% endfor %}
    </div>

    {% include "newsfeed_footer.html" with page="newsfeed" %}

{% endblock %}

{% block script %}
    <script language="javascript">
        function search_show() {
            $('#default').removeClass('showleft').addClass('make_transist').addClass('hideleft');
            $('#search-table').addClass('make_transist').addClass('showleft');
        }
        function default_show() {
            $('#search-table').removeClass('showleft').addClass('make_transist').addClass('hideleft');
            $('#default').addClass('make_transist').addClass('showleft');
        }
    </script>
    <script type="text/javascript">
        $(document).ready(function(){
            resize_image();

            $('#search-table').removeClass('showleft').addClass('hideleft');

            $('#write-submit').click(function() {
                var content =
                        $('#depart').val() + ','
                        + $('#destination').val() + ','
                        + $('#memo').val();
                $('#content').val(content);
                $(this).closest('form').submit();
            });

            $(window).resize(function() {
                clearTimeout(this.id);
                this.id = setTimeout(doneResizing, 500);
            });

            function doneResizing(){
                resize_image();
            }
        });
    </script>
{% endblock %}